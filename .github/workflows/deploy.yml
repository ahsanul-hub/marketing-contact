     name: Deploy to EC2

     on:
       push:
         branches:
           - main

     jobs:
       deploy:
         runs-on: ubuntu-latest

         steps:
         - name: Checkout code
           uses: actions/checkout@v2

         - name: Set up Go
           uses: actions/setup-go@v2
           with:
             go-version: '1.16' 

         - name: Build
           run: go build -o myapp .

         - name: Copy files to EC2
           uses: appleboy/scp-action@master
           with:
             host: ${{ secrets.EC2_HOST }}
             username: ec2-user
             key: ${{ secrets.EC2_SSH_KEY }}
             source: "myapp"
             target: "/home/ec2-user/my-go-app/"

         - name: SSH to EC2 and run the application
           uses: appleboy/ssh-action@master
           with:
             host: ${{ secrets.EC2_HOST }}
             username: ec2-user
             key: ${{ secrets.EC2_SSH_KEY }}
             script: |
               cd ~/my-go-app
               nohup ./myapp &
     ```
